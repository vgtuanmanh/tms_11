<% provide(:title, 'All courses') %>
<h1>Courses <%= @course.name %> Assigned</h1>
<p>Name:<b><%= current_user.name %></b></p>
<p>Email:<b><%= current_user.email %></b></p>
<p>Course:<b><%= @course.name %></b></p>
<p>Description:<b><%= @course.description %></b></p>

<table class="table">
  <div class="course">
    <thead>
      <th>Subject Name</th>
      <th>Task</th>
      <th>Status</th>
    </thead>

    <% @course.subjects.each do |subject| %>
      <table class="table">
        <th style="color:blue">
          <%= subject.name %>
        </th>
        <th style="color:blue">
          <%= subject.tasks.count %> Tasks
        </th>
        <th style="color:blue">
          <% us = subject.user_subjects.find_by user_id: current_user.id %>
          <% if us.status == 0 %>
            Not start yet!
          <% elsif us.status == 1 %>
            In Training Progress
          <% elsif us.status == 2 %>
            Finished
          <% end %>
        </th>
      </tr>
      <% subject.tasks.each do |task| %>
        <tr>
          <th>
          </th>
          <th>
            <%= task.name %>
          </th>
          <th style="color:blue">
            <% us = subject.user_subjects.find_by user_id: current_user.id %>
            <% ut = task.user_tasks.find_by user: current_user %>
            <% if us.status == 0 %>
              <br>
            <% elsif ut.status == 1 %>
              Training
            <% elsif ut.status == 2 %>
              Finished
            <% end %>
          </th>
        </tr>
      <% end %>
    <% end %>
  </div>
</table>

